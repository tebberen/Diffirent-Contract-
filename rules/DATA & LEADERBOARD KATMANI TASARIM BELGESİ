DATA & LEADERBOARD KATMANI TASARIM BELGESÄ°


ğŸŸ§ 0. Veri KatmanÄ±nÄ±n AmacÄ±
Bu katmanÄ±n gÃ¶revi:
	â€¢	KullanÄ±cÄ± bazlÄ± tÃ¼m iÅŸlem verilerini toplamak
	â€¢	ModÃ¼l bazlÄ± kullanÄ±m istatistiklerini tutmak
	â€¢	Global sistem metriklerini sÃ¼rekli gÃ¼ncellemek
	â€¢	Bu verilerden puan formÃ¼lÃ¼ hesaplamak
	â€¢	4 Ã§eÅŸit leaderboard tablosunu oluÅŸturmak
	â€¢	Multi-chain kullanÄ±m verilerini opsiyonel olarak toplamak
Bu katman MainHub kontratÄ±nÄ±n ayrÄ±lmaz bir parÃ§asÄ±dÄ±r.

ğŸŸ© 1. TOPLANACAK VERÄ°LER (ON-CHAIN STORAGE)
AÅŸaÄŸÄ±daki veriler doÄŸrudan MainHub.sol iÃ§inde tutulacaktÄ±r.

âœ” 1.1. GÃ¼nlÃ¼k Ä°ÅŸlem SayÄ±larÄ± (daily actions)
Bunun iÃ§in mapping:

mapping(uint256 => uint256) public dailyActions;
// key = gÃ¼nÃ¼n timestamp'inin YYYYMMDD formatÄ±
Ã–rnek:
	â€¢	20250112 â†’ 823 iÅŸlem
	â€¢	20250113 â†’ 912 iÅŸlem
GÃ¼nlÃ¼k aktivite grafikleri iÃ§in gereklidir.

âœ” 1.2. ModÃ¼l BazlÄ± KullanÄ±m (actions per module)

mapping(uint256 => uint256) public moduleActions;
// moduleActions[moduleID] += 1;
Bu deÄŸer â†’
	â€¢	Module Detail Page
	â€¢	Stats Dashboard
	â€¢	ModÃ¼l bazlÄ± leaderboardâ€¨	â€¢	chainTxCount["CeloModuleX"] = 3122

CeloModuleXâ€™nun skor algoritmasÄ± kullanÄ±cÄ± davranÄ±ÅŸlarÄ±nÄ± doÄŸru Ã¶lÃ§mek iÃ§in tasarlandÄ±.
CeloModuleXâ€™da 4 farklÄ± leaderboard vardÄ±r.

userProfile[user].totalActions++;
ModÃ¼l bazlÄ± iÅŸlem:

userProfile[user].moduleActions[moduleID]++;
Benzersiz modÃ¼l sayÄ±sÄ±:

if (userProfile[user].moduleActions[moduleID] == 1) {
    userProfile[user].uniqueModulesUsed++;
}
Premium modÃ¼l kullanÄ±mÄ±:

userProfile[user].premiumModuleCount++;
Bu veriler â†’ puan hesaplamasÄ± iÃ§in zorunludur.

âœ” 1.4. Multi-chain TX Verileri (opsiyonel)
EÄŸer multi-chain desteÄŸi eklenirse her chain iÃ§in:

mapping(string => uint256) public chainTxCount;
Ã–rnek:
	â€¢	chainTxCount["Celo"] = 1231
	â€¢	chainTxCount["Base"] = 522
	â€¢	chainTxCount["Jello"] = 3122
Bu veri:
	â€¢	Zincir kÄ±yaslama
	â€¢	Multi-chain dashboard
	â€¢	Builder rankâ€¨iÃ§in kullanÄ±lÄ±r.

ğŸŸ§ 2. PUANLAMA SÄ°STEMÄ° (SCORE FORMULA)
Jelloâ€™nun skor algoritmasÄ± kullanÄ±cÄ± davranÄ±ÅŸlarÄ±nÄ± doÄŸru Ã¶lÃ§mek iÃ§in tasarlandÄ±.
Final Skor FormÃ¼lÃ¼:

KullanÄ±cÄ± puanÄ± = 
(benzersiz modÃ¼l sayÄ±sÄ± * 5) 
+ (toplam tx * 1) 
+ (premium modÃ¼l kullanÄ±mÄ± * 10)

âœ” 2.1. Benzersiz ModÃ¼l SayÄ±sÄ± * 5
	â€¢	KullanÄ±cÄ±yÄ± yeni modÃ¼ller denemeye teÅŸvik eder
	â€¢	â€œKeÅŸfetme davranÄ±ÅŸÄ±nÄ±â€ Ã¶dÃ¼llendirir
	â€¢	En gÃ¼Ã§lÃ¼ puan Ã§arpanlarÄ±ndan biridir

âœ” 2.2. Toplam Ä°ÅŸlem * 1
	â€¢	SÃ¼rekliliÄŸi Ã¶dÃ¼llendirir
	â€¢	Ã‡ok kÃ¼Ã§Ã¼k fakat istikrarlÄ± bir puan

âœ” 2.3. Premium ModÃ¼l KullanÄ±mÄ± * 10
	â€¢	Premium NFT sahiplerini Ã¶dÃ¼llendirir
	â€¢	Ãœcretli modÃ¼l kullanÄ±mÄ±nÄ± teÅŸvik eder
	â€¢	Elit kullanÄ±cÄ± davranÄ±ÅŸÄ±nÄ± yansÄ±tÄ±r

âœ” 2.4. Skor 3 yerde gÃ¼ncellenir:
	1	ModÃ¼l execute edilir
	2	MainHub â†’ recordUsage
	3	score hesaplanÄ±r â†’ kaydedilir

function updateScore(address user) internal {
    UserProfile storage u = userProfile[user];
    u.score = 
        u.uniqueModulesUsed * 5 +
        u.totalActions * 1 +
        u.premiumModuleCount * 10;
}

ğŸŸª 3. LEADERBOARD Ã‡EÅÄ°TLERÄ° (TOP 4 LIST)
Jelloâ€™da 4 farklÄ± leaderboard vardÄ±r.
Bu leaderboardâ€™lar hem zincir Ã¼stÃ¼ verilerle hem de frontend cache ile Ã§alÄ±ÅŸÄ±r.

ğŸ¥‡ 3.1. All-Time Leaderboard
TÃ¼m zamanlarÄ±n en yÃ¼ksek skoruna gÃ¶re sÄ±ralama.
KullanÄ±lan deÄŸer:

score
Bu listenin amacÄ±:
	â€¢	En aktif kullanÄ±cÄ±larÄ± gÃ¶stermek
	â€¢	Uzun vadeli sadakati Ã¶dÃ¼llendirmek

ğŸ¥ˆ 3.2. Weekly Leaderboard
Son 7 gÃ¼nÃ¼n verisine gÃ¶re sÄ±ralama.
KullanÄ±lan deÄŸer:

weeklyActions
Bu veri on-chain tutulabilir ama daha Ã§ok frontendâ€™de:
	â€¢	Event loglarÄ± taranarak
	â€¢	Block timestamp ile filtrelenerekâ€¨hesaplanabilir.

ğŸ¥‰ 3.3. Monthly Leaderboard
AynÄ± mantÄ±k â†’ son 30 gÃ¼n.
KullanÄ±lan deÄŸer:

monthlyActions

ğŸ– 3.4. ModÃ¼l BazlÄ± Leaderboard
Her modÃ¼l iÃ§in ayrÄ± bir liste:
Ã–rnek:
	â€¢	En Ã§ok GM kullananlar
	â€¢	En Ã§ok deploy yapanlar
	â€¢	En Ã§ok NFT mintleyenler
	â€¢	En Ã§ok sosyal modÃ¼l kullananlar
Veri:

userProfile[user].moduleActions[moduleID]

ğŸŸ¦ 4. LEADERBOARD ÃœRETÄ°M MÄ°MARÄ°SÄ°
âœ” Ana Kontrat verileri toplar
â†’ gÃ¼nlÃ¼k, modÃ¼l bazlÄ±, kullanÄ±cÄ± bazlÄ±, premium bazlÄ±
âœ” Frontend dÃ¼zenli olarak ÅŸunlarÄ± Ã§eker:
	â€¢	getUserStats
	â€¢	getGlobalStats
	â€¢	moduleActions
	â€¢	all user score values
âœ” Bir sÄ±ralama algoritmasÄ± Ã§alÄ±ÅŸÄ±r:
JS tarafÄ±nda:

users.sort((a, b) => b.score - a.score)
âœ” Frontend cacheâ€™inde saklanÄ±r
â†’ hÄ±zlÄ± yÃ¼klemeâ€¨â†’ dÃ¼ÅŸÃ¼k gas maliyetiâ€¨â†’ multi-chain uyumlu
âœ” Ä°stenirse backend + database modeli eklenir
MongoDB / Supabase / Firebaseâ€¨Ã–zellikle haftalÄ±k & aylÄ±k listeler iÃ§in tavsiye edilir.

ğŸŸ§ 5. ON-CHAIN EVENTLER (LÄ°DERBOARD Ä°Ã‡Ä°N ZORUNLU)
MainHub aÅŸaÄŸÄ±daki eventleri Ã¼retmelidir:

event ModuleExecuted(address indexed user, uint256 moduleId, uint256 timestamp);
event GlobalStatsUpdated(uint256 totalActions);
event UserStatsUpdated(address indexed user, uint256 newScore);
Bu eventâ€™ler sayesinde:
	â€¢	TheGraph
	â€¢	Dune
	â€¢	Custom backend
ile tÃ¼m veriler Ã§ekilebilir.

ğŸŸ« 6. FRONTEND LÄ°DERBOARD API
contractService.js iÃ§inde:
âœ” getLeaderboard()
All-time skorlarÄ± dÃ¶ner.
âœ” getWeeklyLeaderboard()
Event timestamp filtrelemesi ile hesaplanÄ±r.
âœ” getMonthlyLeaderboard()
AynÄ± mantÄ±k.
âœ” getModuleLeaderboard(moduleId)
moduleActionsâ€™a gÃ¶re sÄ±ralanÄ±r.
